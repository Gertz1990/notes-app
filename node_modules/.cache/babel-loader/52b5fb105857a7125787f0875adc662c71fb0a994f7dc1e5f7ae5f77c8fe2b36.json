{"ast":null,"code":"// src/components/Auth.js\nimport React,{useState}from\"react\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Auth=_ref=>{let{setUser}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const handleRegister=async()=>{if(!email||!password){toast.error(\"Введите email и пароль\");return;}try{// Проверяем, существует ли пользователь\nconst response=await axios.get(\"http://localhost:3001/users\");const users=response.data;const userExists=users.some(user=>user.email===email);if(userExists){toast.error(\"Пользователь уже зарегистрирован\");return;}// Сохраняем пользователя\nawait axios.post(\"http://localhost:3001/users\",{email,password});// Устанавливаем пользователя и сохраняем в localStorage\nsetUser({email});localStorage.setItem(\"user\",JSON.stringify({email}));toast.success(\"Регистрация успешна!\");}catch(error){toast.error(\"Ошибка регистрации: \"+error.message);}};const handleLogin=async()=>{if(!email||!password){toast.error(\"Введите email и пароль\");return;}try{// Проверяем учетные данные\nconst response=await axios.get(\"http://localhost:3001/users\");const users=response.data;const user=users.find(u=>u.email===email&&u.password===password);if(!user){toast.error(\"Неверный email или пароль\");return;}// Устанавливаем пользователя и сохраняем в localStorage\nsetUser(user);localStorage.setItem(\"user\",JSON.stringify(user));toast.success(\"Вход выполнен!\");}catch(error){toast.error(\"Ошибка входа: \"+error.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",margin:\"0 auto\",padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0438\\u043B\\u0438 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:{width:\"100%\",padding:\"10px\",marginBottom:\"10px\",border:\"1px solid #d2d2d7\",borderRadius:\"8px\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),style:{width:\"100%\",padding:\"10px\",marginBottom:\"10px\",border:\"1px solid #d2d2d7\",borderRadius:\"8px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,style:{width:\"100%\",padding:\"10px\",backgroundColor:\"#007aff\",color:\"white\",border:\"none\",borderRadius:\"8px\",cursor:\"pointer\",marginBottom:\"10px\"},children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,style:{width:\"100%\",padding:\"10px\",backgroundColor:\"#333\",color:\"white\",border:\"none\",borderRadius:\"8px\",cursor:\"pointer\"},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]});};export default Auth;","map":{"version":3,"names":["React","useState","axios","toast","jsx","_jsx","jsxs","_jsxs","Auth","_ref","setUser","email","setEmail","password","setPassword","handleRegister","error","response","get","users","data","userExists","some","user","post","localStorage","setItem","JSON","stringify","success","message","handleLogin","find","u","style","maxWidth","margin","padding","children","type","placeholder","value","onChange","e","target","width","marginBottom","border","borderRadius","onClick","backgroundColor","color","cursor"],"sources":["C:/Users/Max/OneDrive/Desktop/ProjectM/ercov/notes-app/src/components/Auth.js"],"sourcesContent":["// src/components/Auth.js\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Auth = ({ setUser }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleRegister = async () => {\r\n    if (!email || !password) {\r\n      toast.error(\"Введите email и пароль\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Проверяем, существует ли пользователь\r\n      const response = await axios.get(\"http://localhost:3001/users\");\r\n      const users = response.data;\r\n\r\n      const userExists = users.some((user) => user.email === email);\r\n      if (userExists) {\r\n        toast.error(\"Пользователь уже зарегистрирован\");\r\n        return;\r\n      }\r\n\r\n      // Сохраняем пользователя\r\n      await axios.post(\"http://localhost:3001/users\", { email, password });\r\n\r\n      // Устанавливаем пользователя и сохраняем в localStorage\r\n      setUser({ email });\r\n      localStorage.setItem(\"user\", JSON.stringify({ email }));\r\n      toast.success(\"Регистрация успешна!\");\r\n    } catch (error) {\r\n      toast.error(\"Ошибка регистрации: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    if (!email || !password) {\r\n      toast.error(\"Введите email и пароль\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Проверяем учетные данные\r\n      const response = await axios.get(\"http://localhost:3001/users\");\r\n      const users = response.data;\r\n\r\n      const user = users.find((u) => u.email === email && u.password === password);\r\n      if (!user) {\r\n        toast.error(\"Неверный email или пароль\");\r\n        return;\r\n      }\r\n\r\n      // Устанавливаем пользователя и сохраняем в localStorage\r\n      setUser(user);\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      toast.success(\"Вход выполнен!\");\r\n    } catch (error) {\r\n      toast.error(\"Ошибка входа: \" + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"400px\", margin: \"0 auto\", padding: \"20px\" }}>\r\n      <h2>Войти или зарегистрироваться</h2>\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"10px\",\r\n          marginBottom: \"10px\",\r\n          border: \"1px solid #d2d2d7\",\r\n          borderRadius: \"8px\",\r\n        }}\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"10px\",\r\n          marginBottom: \"10px\",\r\n          border: \"1px solid #d2d2d7\",\r\n          borderRadius: \"8px\",\r\n        }}\r\n      />\r\n      <button\r\n        onClick={handleRegister}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"10px\",\r\n          backgroundColor: \"#007aff\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"8px\",\r\n          cursor: \"pointer\",\r\n          marginBottom: \"10px\",\r\n        }}\r\n      >\r\n        Зарегистрироваться\r\n      </button>\r\n      <button\r\n        onClick={handleLogin}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"10px\",\r\n          backgroundColor: \"#333\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"8px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Войти\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}